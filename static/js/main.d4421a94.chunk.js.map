{"version":3,"sources":["components/Modal/Modal.module.scss","components/ImageGallery/ImageGallery.module.scss","components/Button/Button.module.scss","components/SearchBar/SearchBar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Notifications/Notifications.js","services/pixabayApi.js","App.js","index.js","components/SearchBar/SearchBar.module.scss","components/ImageGalleryItem/ImageGalleryItem.module.scss"],"names":["module","exports","Searchbar","state","query","handleChange","e","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","this","className","styles","SearchForm","input","type","autoComplete","autoFocus","placeholder","onChange","name","button","button_label","Component","ImageGalleryItem","elem","getImgForModal","webformatURL","tags","src","alt","image","onClick","Modal","closeModal","target","nodeName","code","hideModal","window","addEventListener","removeEventListener","Overlay","children","ImageGallery","showModal","toggleModal","gallery","largeImageURL","map","item","id","Button","getNewPage","data-action","Notifications","fetchLength","galleryLength","searchQuery","error","defaultProps","fetchImages","page","url","fetch","then","response","json","hits","App","isLoading","getQueryByForm","setNewPage","prevState","fetchImagesByQuery","prevProps","result","length","catch","finally","scrollTo","top","document","documentElement","scrollHeight","behavior","color","height","width","timeout","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d4421a94.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2CGBY\",\"Modal\":\"Modal_Modal__pO5N6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2PQIo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3WIhK\"};","import React, { Component } from 'react';\r\nimport styles from './SearchBar.module.scss';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Searchbar extends Component {\r\n    state = {\r\n        query: '',\r\n    };\r\n    handleChange = e => {\r\n        this.setState({ query: e.currentTarget.value });\r\n    };\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n        const { query } = this.state;\r\n        this.props.onSubmit({ query });\r\n        this.setState({ query: '' });\r\n    };\r\n    render() {\r\n        const { query } = this.state;\r\n        // console.log(query);\r\n        return (\r\n            <header className={styles.Searchbar}>\r\n                <form className={styles.SearchForm} onSubmit={this.handleSubmit}>\r\n                    <input\r\n                        className={styles.input}\r\n                        type=\"text\"\r\n                        autoComplete=\"off\"\r\n                        autoFocus\r\n                        placeholder=\"Search images and photos\"\r\n                        onChange={this.handleChange}\r\n                        name=\"query\"\r\n                        value={query}\r\n                    />\r\n                    <button type=\"submit\" className={styles.button}>\r\n                        <span className={styles.button_label}>Search</span>\r\n                    </button>\r\n                </form>\r\n            </header>\r\n        );\r\n    }\r\n}\r\nSearchbar.propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n};\r\nexport default Searchbar;","import React from 'react';\r\nimport styles from './ImageGalleryItem.module.scss';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst ImageGalleryItem = ({ elem, getImgForModal }) => {\r\n    // console.log(elem);\r\n    const { webformatURL, tags } = elem;\r\n    // console.log(largeImageURL);\r\n    return (\r\n        <li className={styles.ImageGalleryItem}>\r\n            <img\r\n                src={webformatURL}\r\n                alt={tags}\r\n                className={styles.image}\r\n                onClick={() => getImgForModal({ elem })}\r\n            />\r\n        </li>\r\n    );\r\n};\r\nImageGalleryItem.propTypes = {\r\n    elem: PropTypes.shape({\r\n        webformatURL: PropTypes.string.isRequired,\r\n        tags: PropTypes.string.isRequired,\r\n    }).isRequired,\r\n    getImgForModal: PropTypes.func.isRequired,\r\n};\r\nexport default ImageGalleryItem;","import React, { Component } from 'react';\r\nimport styles from './Modal.module.scss';\r\nimport PropTypes from 'prop-types';\r\nclass Modal extends Component {\r\n    componentDidMount() {\r\n        window.addEventListener('keydown', this.closeModal);\r\n    }\r\n    componentWillUnmount() {\r\n        window.removeEventListener('keydown', this.closeModal);\r\n    }\r\n\r\n    closeModal = e => {\r\n        if (e.target.nodeName !== 'IMG' || e.code === 'Escape') {\r\n            this.props.hideModal();\r\n        }\r\n    };\r\n    render() {\r\n        return (\r\n            <div className={styles.Overlay} onClick={this.closeModal}>\r\n                <div className={styles.Modal}>{this.props.children}</div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nModal.propTypes = {\r\n    hideModal: PropTypes.func.isRequired,\r\n};\r\nexport default Modal;","import React, { Component } from 'react';\r\nimport styles from './ImageGallery.module.scss';\r\nimport PropTypes from 'prop-types';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport Modal from '../Modal/Modal';\r\n\r\n\r\nclass ImageGallery extends Component {\r\n    state = {\r\n        elem: '',\r\n        showModal: false,\r\n    };\r\n    toggleModal = () => {\r\n        this.setState({\r\n            showModal: !this.state.showModal,\r\n        });\r\n    };\r\n    getImgForModal = ({ elem }) => {\r\n        if (elem) {\r\n            this.toggleModal();\r\n            this.setState({\r\n                elem,\r\n            });\r\n        }\r\n    };\r\n    render() {\r\n        const { showModal, elem } = this.state;\r\n        const { gallery } = this.props;\r\n        // console.log(elem);\r\n        const { tags, largeImageURL } = elem;\r\n        return (\r\n            <ul className={styles.ImageGallery}>\r\n                {gallery.map(item => {\r\n                    return (\r\n                        <ImageGalleryItem\r\n                            key={item.id}\r\n                            elem={item}\r\n                            getImgForModal={this.getImgForModal}\r\n                        />\r\n                    );\r\n                })}\r\n                {showModal && (\r\n                    <Modal hideModal={this.toggleModal}>\r\n                        <img src={largeImageURL} alt={tags} />\r\n                    </Modal>\r\n                )}\r\n            </ul>\r\n        );\r\n    }\r\n}\r\nImageGallery.propTypes = {\r\n    gallery: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            id: PropTypes.number.isRequired,\r\n        }),\r\n    ).isRequired,\r\n};\r\nexport default ImageGallery;","import React from 'react';\r\nimport styles from './Button.module.scss';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Button = ({ getNewPage }) => {\r\n  // console.log(getNewPage);\r\n  return (\r\n    <button\r\n      className={styles.Button}\r\n      type=\"button\"\r\n      data-action=\"load-more\"\r\n      // disabled={true}\r\n      onClick={getNewPage}\r\n    >\r\n      Show more\r\n    </button>\r\n  );\r\n};\r\nButton.propTypes = {\r\n  getNewPage: PropTypes.func.isRequired,\r\n};\r\nexport default Button;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nconst Notifications = ({ fetchLength, galleryLength, searchQuery, error }) => {\r\n    if (error) {\r\n        // console.log(error);\r\n        return <p>Oops! Something wrong! Request error!</p>;\r\n    } else if (!error) {\r\n        if (!searchQuery) {\r\n            return <p>Please enter image name!</p>;\r\n        } else if (searchQuery) {\r\n            if (!fetchLength && !galleryLength) {\r\n                return <p>Image not found. Please check your request and try again!</p>;\r\n            } else if (fetchLength < 12 && galleryLength > 0) {\r\n                return <p>These are all the images we found!</p>;\r\n            }\r\n        }\r\n    }\r\n\r\n    return <p></p>;\r\n};\r\nNotifications.defaultProps = {\r\n    fetchLength: 0,\r\n    galleryLength: 0,\r\n    searchQuery: '',\r\n    error: false,\r\n};\r\nNotifications.propTypes = {\r\n    fetchLength: PropTypes.number,\r\n    galleryLength: PropTypes.number,\r\n    searchQuery: PropTypes.string,\r\n    error: PropTypes.bool,\r\n};\r\nexport default Notifications;","const apiKey = '20792442-da8e72019ea6ce980a153cff0';\r\n\r\nfunction fetchImages(searchQuery, page) {\r\n    // console.log(searchQuery);\r\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&page=${page}&per_page=12`;\r\n\r\n    return fetch(url)\r\n        .then(response => {\r\n            // console.log(response);\r\n            return response.json();\r\n        })\r\n        .then(({ hits }) => {\r\n            // console.log({ hits });\r\n            return hits;\r\n        });\r\n}\r\n\r\nexport default fetchImages;","import React, { Component } from 'react';\nimport './App.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Loader from 'react-loader-spinner';\n\nimport Searchbar from './components/SearchBar/SearchBar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport Button from './components/Button/Button';\nimport Notifications from './components/Notifications/Notifications';\n\nimport fetchImages from './services/pixabayApi';\n\nclass App extends Component {\n  state = {\n    query: '',\n    page: 1,\n    gallery: [],\n    fetchLength: null,\n    isLoading: false,\n    error: false,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    // console.log('я обновился');\n\n    const { query, page } = this.state;\n    if (query !== prevState.query && query !== '') {\n      this.fetchImagesByQuery(query);\n    } else if (query === prevState.query && page !== prevState.page) {\n      this.fetchImagesByQuery(query);\n    }\n  }\n\n  getQueryByForm = ({ query }) => {\n    // console.log(query);\n    this.setState({ query: '', page: 1, gallery: [], fetchLength: 0 });\n    this.setState({ query: query, page: 1, gallery: [] });\n  };\n\n  setNewPage = e => {\n    e.preventDefault();\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n    }));\n  };\n\n  fetchImagesByQuery = (prevProps, prevState) => {\n    const { query, page } = this.state;\n\n    this.setState({ isLoading: true });\n    fetchImages(query, page)\n      .then(result => {\n        // console.log(result);\n        this.setState(prevState => ({\n          gallery: [...prevState.gallery, ...result],\n          fetchLength: result.length,\n        }));\n      })\n      .catch(error => {\n        this.setState({ error: true });\n      })\n      .finally(() => {\n        this.setState({ isLoading: false });\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      });\n    // }\n  };\n  render() {\n    const { gallery, fetchLength, isLoading, query, error } = this.state;\n    // console.log(fetchLength);\n    return (\n      <div className=\"App\">\n        <h1>Search image</h1>\n        <Searchbar onSubmit={this.getQueryByForm} />\n        <ImageGallery gallery={gallery} />\n        {isLoading && (\n          <Loader\n            type=\"ThreeDots\"\n            color=\"#3f51b5\"\n            height={100}\n            width={100}\n            timeout={3000}\n          />\n        )}\n        {fetchLength === 12 && !isLoading && (\n          <Button getNewPage={this.setNewPage} />\n        )}\n\n        <Notifications\n          fetchLength={fetchLength}\n          galleryLength={gallery.length}\n          searchQuery={query}\n          error={error}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './App.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"SearchBar_Searchbar__fhoBt\",\"SearchForm\":\"SearchBar_SearchForm__36iTh\",\"button\":\"SearchBar_button__3H5Es\",\"button_label\":\"SearchBar_button_label__A5fCU\",\"input\":\"SearchBar_input__3zYU-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2F3Ra\",\"image\":\"ImageGalleryItem_image__RUFfO\"};"],"sourceRoot":""}